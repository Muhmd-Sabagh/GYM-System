@model GYM_System.Models.ClientAssessment

@{
    ViewData["Title"] = "Create Client Assessment";
    var clients = ViewBag.Clients as SelectList;
    var defaultFormCode = ViewBag.DefaultFormCode as string;
}

<h1 class="mb-4">Create Client Assessment</h1>

<div class="card">
    <div class="card-header bg-dark">
        <h5 class="mb-0 text-white">Assessment Details</h5>
    </div>
    <div class="card-body">
        <form asp-action="Create">
            <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="ClientId" class="form-label"></label>
                        <select asp-for="ClientId" class="form-control" asp-items="clients" required>
                            <option value="">-- Select Client --</option>
                        </select>
                        <span asp-validation-for="ClientId" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="Timestamp" class="form-label"></label>
                        <input asp-for="Timestamp" class="form-control" type="datetime-local" value="@DateTime.Now.ToString("yyyy-MM-ddTHH:mm")" required />
                        <span asp-validation-for="Timestamp" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group mb-3">
                        <label asp-for="FormCode" class="form-label"></label>
                        <input asp-for="FormCode" class="form-control" value="@defaultFormCode" required />
                        <span asp-validation-for="FormCode" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <hr class="my-4" />
            <h4 class="mb-3">Client Information</h4>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="Country" class="form-label"></label>
                        <input asp-for="Country" class="form-control" />
                        <span asp-validation-for="Country" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="Religion" class="form-label"></label>
                        <select asp-for="Religion" class="form-control">
                            <option value="">-- Select --</option>
                            <option value="مسلم">مسلم</option>
                            <option value="مسيحي">مسيحي</option>
                        </select>
                        <span asp-validation-for="Religion" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group mb-3">
                        <label asp-for="ServiceGoal" class="form-label"></label>
                        <select asp-for="ServiceGoal" class="form-control">
                            <option value="">-- Select --</option>
                            <option value="زيادة وزن (تضخيم)">زيادة وزن (تضخيم)</option>
                            <option value="خسارة وزن (تنشيف)">خسارة وزن (تنشيف)</option>
                            <option value="حياة صحية">حياة صحية</option>
                        </select>
                        <span asp-validation-for="ServiceGoal" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="WeightKg" class="form-label"></label>
                        <input asp-for="WeightKg" class="form-control" type="number" step="0.1" min="0" required />
                        <span asp-validation-for="WeightKg" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="HeightCm" class="form-label"></label>
                        <input asp-for="HeightCm" class="form-control" type="number" step="0.1" min="0" required />
                        <span asp-validation-for="HeightCm" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="Gender" class="form-label"></label>
                        <select asp-for="Gender" class="form-control" id="genderSelect" required>
                            <option value="">-- Select --</option>
                            <option value="ذكر">ذكر</option>
                            <option value="انثى">انثى</option>
                        </select>
                        <span asp-validation-for="Gender" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="DateOfBirth" class="form-label"></label>
                        <input asp-for="DateOfBirth" class="form-control" type="date" value="@Model.DateOfBirth.ToString("yyyy-MM-dd")" required />
                        <span asp-validation-for="DateOfBirth" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="JobProfession" class="form-label"></label>
                        <input asp-for="JobProfession" class="form-control" />
                        <span asp-validation-for="JobProfession" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <hr class="my-4" />
            <h4 class="mb-3">Body Assessment (Optional)</h4>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="NeckCircumferenceCm" class="form-label"></label>
                        <input asp-for="NeckCircumferenceCm" class="form-control" type="number" step="0.1" min="0" />
                        <span asp-validation-for="NeckCircumferenceCm" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="WaistCircumferenceCm" class="form-label"></label>
                        <input asp-for="WaistCircumferenceCm" class="form-control" type="number" step="0.1" min="0" />
                        <span asp-validation-for="WaistCircumferenceCm" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="HipCircumferenceCm" class="form-label"></label>
                        <input asp-for="HipCircumferenceCm" class="form-control" type="number" step="0.1" min="0" />
                        <span asp-validation-for="HipCircumferenceCm" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="ArmCircumferenceCm" class="form-label"></label>
                        <input asp-for="ArmCircumferenceCm" class="form-control" type="number" step="0.1" min="0" />
                        <span asp-validation-for="ArmCircumferenceCm" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mb-3">
                        <label asp-for="ThighCircumferenceCm" class="form-label"></label>
                        <input asp-for="ThighCircumferenceCm" class="form-control" type="number" step="0.1" min="0" />
                        <span asp-validation-for="ThighCircumferenceCm" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="FrontBodyPhotoPath" class="form-label"></label>
                        <input asp-for="FrontBodyPhotoPath" class="form-control" placeholder="URL or path to image" />
                        <span asp-validation-for="FrontBodyPhotoPath" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="SideBodyPhotoPath" class="form-label"></label>
                        <input asp-for="SideBodyPhotoPath" class="form-control" placeholder="URL or path to image" />
                        <span asp-validation-for="SideBodyPhotoPath" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group mb-3">
                        <label asp-for="BackBodyPhotoPath" class="form-label"></label>
                        <input asp-for="BackBodyPhotoPath" class="form-control" placeholder="URL or path to image" />
                        <span asp-validation-for="BackBodyPhotoPath" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <hr class="my-4" />
            <h4 class="mb-3">Medical Assessment</h4>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasHealthProblems"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasHealthProblems" id="healthProblemsYes" value="true" @(Model.HasHealthProblems ? "checked" : "") />
                    <label class="form-check-label" for="healthProblemsYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasHealthProblems" id="healthProblemsNo" value="false" @(!Model.HasHealthProblems ? "checked" : "") />
                    <label class="form-check-label" for="healthProblemsNo">No</label>
                </div>
                <div id="healthProblemsDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="HealthProblemsDetails" class="form-label"></label>
                    <textarea asp-for="HealthProblemsDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="HealthProblemsDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasRecentTests"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasRecentTests" id="recentTestsYes" value="true" @(Model.HasRecentTests ? "checked" : "") />
                    <label class="form-check-label" for="recentTestsYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasRecentTests" id="recentTestsNo" value="false" @(!Model.HasRecentTests ? "checked" : "") />
                    <label class="form-check-label" for="recentTestsNo">No</label>
                </div>
                <div id="recentTestsDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="RecentTestsDetails" class="form-label"></label>
                    <textarea asp-for="RecentTestsDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="RecentTestsDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="IsTakingMedicationsSupplements"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="IsTakingMedicationsSupplements" id="medsSuppsYes" value="true" @(Model.IsTakingMedicationsSupplements ? "checked" : "") />
                    <label class="form-check-label" for="medsSuppsYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="IsTakingMedicationsSupplements" id="medsSuppsNo" value="false" @(!Model.IsTakingMedicationsSupplements ? "checked" : "") />
                    <label class="form-check-label" for="medsSuppsNo">No</label>
                </div>
                <div id="medsSuppsDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="MedicationsSupplementsDetails" class="form-label"></label>
                    <textarea asp-for="MedicationsSupplementsDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="MedicationsSupplementsDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasMedicationAllergies"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasMedicationAllergies" id="medAllergiesYes" value="true" @(Model.HasMedicationAllergies ? "checked" : "") />
                    <label class="form-check-label" for="medAllergiesYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasMedicationAllergies" id="medAllergiesNo" value="false" @(!Model.HasMedicationAllergies ? "checked" : "") />
                    <label class="form-check-label" for="medAllergiesNo">No</label>
                </div>
                <div id="medAllergiesDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="MedicationAllergiesDetails" class="form-label"></label>
                    <textarea asp-for="MedicationAllergiesDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="MedicationAllergiesDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasChronicHereditaryDiseases"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasChronicHereditaryDiseases" id="chronicDiseasesYes" value="true" @(Model.HasChronicHereditaryDiseases ? "checked" : "") />
                    <label class="form-check-label" for="chronicDiseasesYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasChronicHereditaryDiseases" id="chronicDiseasesNo" value="false" @(!Model.HasChronicHereditaryDiseases ? "checked" : "") />
                    <label class="form-check-label" for="chronicDiseasesNo">No</label>
                </div>
                <div id="chronicDiseasesDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="ChronicHereditaryDiseasesDetails" class="form-label"></label>
                    <textarea asp-for="ChronicHereditaryDiseasesDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="ChronicHereditaryDiseasesDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasPastSurgeries"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasPastSurgeries" id="surgeriesYes" value="true" @(Model.HasPastSurgeries ? "checked" : "") />
                    <label class="form-check-label" for="surgeriesYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasPastSurgeries" id="surgeriesNo" value="false" @(!Model.HasPastSurgeries ? "checked" : "") />
                    <label class="form-check-label" for="surgeriesNo">No</label>
                </div>
                <div id="surgeriesDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="PastSurgeriesDetails" class="form-label"></label>
                    <textarea asp-for="PastSurgeriesDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="PastSurgeriesDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasInjuries"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasInjuries" id="injuriesYes" value="true" @(Model.HasInjuries ? "checked" : "") />
                    <label class="form-check-label" for="injuriesYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasInjuries" id="injuriesNo" value="false" @(!Model.HasInjuries ? "checked" : "") />
                    <label class="form-check-label" for="injuriesNo">No</label>
                </div>
                <div id="injuriesDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="InjuriesDetails" class="form-label"></label>
                    <textarea asp-for="InjuriesDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="InjuriesDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="IsSmoker"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="IsSmoker" id="smokerYes" value="true" @(Model.IsSmoker ? "checked" : "") />
                    <label class="form-check-label" for="smokerYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="IsSmoker" id="smokerNo" value="false" @(!Model.IsSmoker ? "checked" : "") />
                    <label class="form-check-label" for="smokerNo">No</label>
                </div>
            </div>

            <hr class="my-4" />
            <h4 class="mb-3">Dietary Assessment</h4>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasPreviousDietCommitment"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasPreviousDietCommitment" id="prevDietYes" value="true" @(Model.HasPreviousDietCommitment ? "checked" : "") />
                    <label class="form-check-label" for="prevDietYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasPreviousDietCommitment" id="prevDietNo" value="false" @(!Model.HasPreviousDietCommitment ? "checked" : "") />
                    <label class="form-check-label" for="prevDietNo">No</label>
                </div>
                <div id="prevDietExperienceDiv" style="display:none;" class="mt-2">
                    <label asp-for="PreviousDietExperience" class="form-label"></label>
                    <textarea asp-for="PreviousDietExperience" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="PreviousDietExperience" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label asp-for="DailyEffortDescription" class="form-label"></label>
                <select asp-for="DailyEffortDescription" class="form-control" required>
                    <option value="">-- Select --</option>
                    <option value="لا يوجد مجهود تقريبا (وظيفة مكتبية مثلا)">لا يوجد مجهود تقريبا (وظيفة مكتبية مثلا)</option>
                    <option value="مجهود بسيط (مشاوير خفيفة)">مجهود بسيط (مشاوير خفيفة)</option>
                    <option value="مجهود متوسط (عمل يتطلب حركة)">مجهود متوسط (عمل يتطلب حركة)</option>
                    <option value="مجهود عالي (عمل بدني شاق)">مجهود عالي (عمل بدني شاق)</option>
                </select>
                <span asp-validation-for="DailyEffortDescription" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="DietCommitmentObstacles" class="form-label"></label>
                <textarea asp-for="DietCommitmentObstacles" class="form-control" rows="3"></textarea>
                <span asp-validation-for="DietCommitmentObstacles" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="DrinksSpecificBeverages"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="DrinksSpecificBeverages" id="beveragesYes" value="true" @(Model.DrinksSpecificBeverages ? "checked" : "") />
                    <label class="form-check-label" for="beveragesYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="DrinksSpecificBeverages" id="beveragesNo" value="false" @(!Model.DrinksSpecificBeverages ? "checked" : "") />
                    <label class="form-check-label" for="beveragesNo">No</label>
                </div>
                <div id="beverageDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="BeverageConsumptionDetails" class="form-label"></label>
                    <textarea asp-for="BeverageConsumptionDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="BeverageConsumptionDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label asp-for="LastDietSystemAvailable" class="form-label"></label>
                <input asp-for="LastDietSystemAvailable" class="form-control" />
                <span asp-validation-for="LastDietSystemAvailable" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasFoodAllergies"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasFoodAllergies" id="foodAllergiesYes" value="true" @(Model.HasFoodAllergies ? "checked" : "") />
                    <label class="form-check-label" for="foodAllergiesYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasFoodAllergies" id="foodAllergiesNo" value="false" @(!Model.HasFoodAllergies ? "checked" : "") />
                    <label class="form-check-label" for="foodAllergiesNo">No</label>
                </div>
                <div id="foodAllergyDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="FoodAllergyDetails" class="form-label"></label>
                    <textarea asp-for="FoodAllergyDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="FoodAllergyDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="DislikesSpecificFood"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="DislikesSpecificFood" id="dislikeFoodYes" value="true" @(Model.DislikesSpecificFood ? "checked" : "") />
                    <label class="form-check-label" for="dislikeFoodYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="DislikesSpecificFood" id="dislikeFoodNo" value="false" @(!Model.DislikesSpecificFood ? "checked" : "") />
                    <label class="form-check-label" for="dislikeFoodNo">No</label>
                </div>
                <div id="dislikeFoodDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="DislikedFoodDetails" class="form-label"></label>
                    <textarea asp-for="DislikedFoodDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="DislikedFoodDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="WantsVitaminsMinerals"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="WantsVitaminsMinerals" id="vitaminsMineralsYes" value="true" @(Model.WantsVitaminsMinerals ? "checked" : "") />
                    <label class="form-check-label" for="vitaminsMineralsYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="WantsVitaminsMinerals" id="vitaminsMineralsNo" value="false" @(!Model.WantsVitaminsMinerals ? "checked" : "") />
                    <label class="form-check-label" for="vitaminsMineralsNo">No</label>
                </div>
                <div id="vitaminsMineralsDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="AvailableDesiredVitaminsMinerals" class="form-label"></label>
                    <textarea asp-for="AvailableDesiredVitaminsMinerals" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="AvailableDesiredVitaminsMinerals" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label asp-for="DesiredMainMealsCount" class="form-label"></label>
                <select asp-for="DesiredMainMealsCount" class="form-control" required>
                    <option value="">-- Select --</option>
                    <option value="3">3 وجبات</option>
                    <option value="4">4 وجبات</option>
                    <option value="5">5 وجبات</option>
                    <option value="6">6 وجبات</option>
                </select>
                <span asp-validation-for="DesiredMainMealsCount" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="DietFlexibilityPreference" class="form-label"></label>
                <select asp-for="DietFlexibilityPreference" class="form-control" required>
                    <option value="">-- Select --</option>
                    <option value="أريد مرونة في النظام الغذائي">أريد مرونة في النظام الغذائي</option>
                    <option value="مستعد لأقسو على نفسي">مستعد لأقسو على نفسي</option>
                </select>
                <span asp-validation-for="DietFlexibilityPreference" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="DietBudget" class="form-label"></label>
                <select asp-for="DietBudget" class="form-control" required>
                    <option value="">-- Select --</option>
                    <option value="ميزانية منخفضة">ميزانية منخفضة</option>
                    <option value="ميزانية متوسطة">ميزانية متوسطة</option>
                    <option value="ميزانية عالية">ميزانية عالية</option>
                </select>
                <span asp-validation-for="DietBudget" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="PreferredProteinTypes" class="form-label d-block">Preferred Protein Types (multiple choices)</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="دجاج" id="proteinChicken" />
                    <label class="form-check-label" for="proteinChicken">دجاج</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="لحم" id="proteinMeat" />
                    <label class="form-check-label" for="proteinMeat">لحم</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="سمك" id="proteinFish" />
                    <label class="form-check-label" for="proteinFish">سمك</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="بيض" id="proteinEggs" />
                    <label class="form-check-label" for="proteinEggs">بيض</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="جبنة قريش" id="proteinCheese" />
                    <label class="form-check-label" for="proteinCheese">جبنة قريش</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="بروتين بار" id="proteinBar" />
                    <label class="form-check-label" for="proteinBar">بروتين بار</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="بروتين شيك" id="proteinShake" />
                    <label class="form-check-label" for="proteinShake">بروتين شيك</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="عدس" id="proteinLentils" />
                    <label class="form-check-label" for="proteinLentils">عدس</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="فول" id="proteinBeans" />
                    <label class="form-check-label" for="proteinBeans">فول</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="فاصوليا" id="proteinKidneyBeans" />
                    <label class="form-check-label" for="proteinKidneyBeans">فاصوليا</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredProteinTypes" value="حمص" id="proteinChickpeas" />
                    <label class="form-check-label" for="proteinChickpeas">حمص</label>
                </div>
            </div>

            <div class="form-group mb-3">
                <label asp-for="PreferredCarbohydrateTypes" class="form-label d-block">Preferred Carbohydrate Types (multiple choices)</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="أرز" id="carbRice" />
                    <label class="form-check-label" for="carbRice">أرز</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="بطاطس" id="carbPotato" />
                    <label class="form-check-label" for="carbPotato">بطاطس</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="بطاطا" id="carbSweetPotato" />
                    <label class="form-check-label" for="carbSweetPotato">بطاطا</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="مكرونة" id="carbPasta" />
                    <label class="form-check-label" for="carbPasta">مكرونة</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="خبز بلدي" id="carbLocalBread" />
                    <label class="form-check-label" for="carbLocalBread">خبز بلدي</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="عيش سن" id="carbBrownBread" />
                    <label class="form-check-label" for="carbBrownBread">عيش سن</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="خبز توست" id="carbToast" />
                    <label class="form-check-label" for="carbToast">خبز توست</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="شوفان" id="carbOats" />
                    <label class="form-check-label" for="carbOats">شوفان</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredCarbohydrateTypes" value="توست بني" id="carbBrownToast" />
                    <label class="form-check-label" for="carbBrownToast">توست بني</label>
                </div>
            </div>

            <div class="form-group mb-3">
                <label asp-for="PreferredHealthyFatTypes" class="form-label d-block">Preferred Healthy Fat Types (multiple choices)</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredHealthyFatTypes" value="زيت الزيتون" id="fatOliveOil" />
                    <label class="form-check-label" for="fatOliveOil">زيت الزيتون</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredHealthyFatTypes" value="فول سوداني" id="fatPeanuts" />
                    <label class="form-check-label" for="fatPeanuts">فول سوداني</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredHealthyFatTypes" value="فستق" id="fatPistachios" />
                    <label class="form-check-label" for="fatPistachios">فستق</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredHealthyFatTypes" value="كاجو" id="fatCashews" />
                    <label class="form-check-label" for="fatCashews">كاجو</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredHealthyFatTypes" value="بندق" id="fatHazelnuts" />
                    <label class="form-check-label" for="fatHazelnuts">بندق</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredHealthyFatTypes" value="لوز" id="fatAlmonds" />
                    <label class="form-check-label" for="fatAlmonds">لوز</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="PreferredHealthyFatTypes" value="زبدة فول سوداني" id="fatPeanutButter" />
                    <label class="form-check-label" for="fatPeanutButter">زبدة فول سوداني</label>
                </div>
            </div>

            <hr class="my-4" />
            <h4 class="mb-3">Workout Assessment</h4>

            <div class="form-group mb-3">
                <label asp-for="WorkoutExperience" class="form-label"></label>
                <textarea asp-for="WorkoutExperience" class="form-control" rows="3"></textarea>
                <span asp-validation-for="WorkoutExperience" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="ResistanceTrainingDuration" class="form-label"></label>
                <select asp-for="ResistanceTrainingDuration" class="form-control" required>
                    <option value="">-- Select --</option>
                    <option value="أول مرة أمارس تمارين المقاومة">أول مرة أمارس تمارين المقاومة</option>
                    <option value="أمارس تمارين المقاومة على فترات متقطعة">أمارس تمارين المقاومة على فترات متقطعة</option>
                    <option value="أقل من 3 شهور">أقل من 3 شهور</option>
                    <option value="أكثر من 3 شهور">أكثر من 3 شهور</option>
                    <option value="أكثر من 6 شهور">أكثر من 6 شهور</option>
                    <option value="أكثر من سنة">أكثر من سنة</option>
                </select>
                <span asp-validation-for="ResistanceTrainingDuration" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="PracticesOtherSports"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="PracticesOtherSports" id="otherSportsYes" value="true" @(Model.PracticesOtherSports ? "checked" : "") />
                    <label class="form-check-label" for="otherSportsYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="PracticesOtherSports" id="otherSportsNo" value="false" @(!Model.PracticesOtherSports ? "checked" : "") />
                    <label class="form-check-label" for="otherSportsNo">No</label>
                </div>
                <div id="otherSportsDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="OtherSportsDetails" class="form-label"></label>
                    <textarea asp-for="OtherSportsDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="OtherSportsDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label asp-for="WorkoutLocation" class="form-label"></label>
                <select asp-for="WorkoutLocation" class="form-control" id="workoutLocationSelect" required>
                    <option value="">-- Select --</option>
                    <option value="جيم">جيم</option>
                    <option value="منزل">منزل</option>
                </select>
                <span asp-validation-for="WorkoutLocation" class="text-danger"></span>
            </div>

            <div class="form-group mb-3" id="availableHomeEquipmentDiv" style="display:none;">
                <label asp-for="AvailableHomeEquipment" class="form-label"></label>
                <textarea asp-for="AvailableHomeEquipment" class="form-control" rows="2"></textarea>
                <span asp-validation-for="AvailableHomeEquipment" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="AvailableWorkoutDaysCount" class="form-label"></label>
                <select asp-for="AvailableWorkoutDaysCount" class="form-control" required>
                    <option value="">-- Select --</option>
                    <option value="1">يوم واحد</option>
                    <option value="2">يومان</option>
                    <option value="3">3 ايام</option>
                    <option value="4">4 ايام</option>
                    <option value="5">5 ايام</option>
                    <option value="6">6 ايام</option>
                </select>
                <span asp-validation-for="AvailableWorkoutDaysCount" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="AvailableWorkoutDays" class="form-label d-block">Available Workout Days (multiple choices)</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="AvailableWorkoutDays" value="السبت" id="daySaturday" />
                    <label class="form-check-label" for="daySaturday">السبت</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="AvailableWorkoutDays" value="الأحد" id="daySunday" />
                    <label class="form-check-label" for="daySunday">الأحد</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="AvailableWorkoutDays" value="الاثنين" id="dayMonday" />
                    <label class="form-check-label" for="dayMonday">الاثنين</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="AvailableWorkoutDays" value="الثلاثاء" id="dayTuesday" />
                    <label class="form-check-label" for="dayTuesday">الثلاثاء</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="AvailableWorkoutDays" value="الأربعاء" id="dayWednesday" />
                    <label class="form-check-label" for="dayWednesday">الأربعاء</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="AvailableWorkoutDays" value="الخميس" id="dayThursday" />
                    <label class="form-check-label" for="dayThursday">الخميس</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="AvailableWorkoutDays" value="الجمعة" id="dayFriday" />
                    <label class="form-check-label" for="dayFriday">الجمعة</label>
                </div>
            </div>

            <div class="form-group mb-3">
                <label class="form-label d-block" asp-for="HasExerciseDiscomfort"></label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasExerciseDiscomfort" id="discomfortYes" value="true" @(Model.HasExerciseDiscomfort ? "checked" : "") />
                    <label class="form-check-label" for="discomfortYes">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="HasExerciseDiscomfort" id="discomfortNo" value="false" @(!Model.HasExerciseDiscomfort ? "checked" : "") />
                    <label class="form-check-label" for="discomfortNo">No</label>
                </div>
                <div id="discomfortDetailsDiv" style="display:none;" class="mt-2">
                    <label asp-for="DiscomfortExercisesDetails" class="form-label"></label>
                    <textarea asp-for="DiscomfortExercisesDetails" class="form-control" rows="2"></textarea>
                    <span asp-validation-for="DiscomfortExercisesDetails" class="text-danger"></span>
                </div>
            </div>

            <div class="form-group mb-3">
                <label asp-for="PreferredCardioType" class="form-label"></label>
                <select asp-for="PreferredCardioType" class="form-control" required>
                    <option value="">-- Select --</option>
                    <option value="تريدميل (مشاية)">تريدميل (مشاية)</option>
                    <option value="عجلة (دراجة ثابتة)">عجلة (دراجة ثابتة)</option>
                    <option value="سلم (ستير ماستر)">سلم (ستير ماستر)</option>
                    <option value="تجديف">تجديف</option>
                    <option value="أخرى">أخرى</option>
                </select>
                <span asp-validation-for="PreferredCardioType" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="DailyStepsCount" class="form-label"></label>
                <select asp-for="DailyStepsCount" class="form-control" required>
                    <option value="">-- Select --</option>
                    <option value="أقل من 2000 خطوة">أقل من 2000 خطوة</option>
                    <option value="2000-5000 خطوة">2000-5000 خطوة</option>
                    <option value="5000-10000 خطوة">5000-10000 خطوة</option>
                    <option value="أكثر من 10000 خطوة">أكثر من 10000 خطوة</option>
                </select>
                <span asp-validation-for="DailyStepsCount" class="text-danger"></span>
            </div>

            <hr class="my-4" />
            <h4 class="mb-3">General Assessment</h4>

            <div class="form-group mb-3">
                <label asp-for="PreviousOnlineTrainingExperience" class="form-label"></label>
                <textarea asp-for="PreviousOnlineTrainingExperience" class="form-control" rows="3"></textarea>
                <span asp-validation-for="PreviousOnlineTrainingExperience" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="ReasonForSubscription" class="form-label"></label>
                <textarea asp-for="ReasonForSubscription" class="form-control" rows="3"></textarea>
                <span asp-validation-for="ReasonForSubscription" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="OtherNotes" class="form-label"></label>
                <textarea asp-for="OtherNotes" class="form-control" rows="3"></textarea>
                <span asp-validation-for="OtherNotes" class="text-danger"></span>
            </div>

            <div class="form-group mt-3">
                <input type="submit" value="Create Assessment" class="btn btn-primary me-2" />
                <a asp-action="ClientFile" asp-controller="Clients" asp-route-id="@Model.ClientId" class="btn btn-secondary">Back to Client File</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        $(document).ready(function () {
            // Function to toggle visibility of detail fields based on radio button selection
            function toggleDetails(radioGroupName, detailsDivId) {
                $(`input[name="${radioGroupName}"]`).on('change', function () {
                    if ($(this).val() === 'true') {
                        $(`#${detailsDivId}`).show();
                    } else {
                        $(`#${detailsDivId}`).hide();
                        $(`#${detailsDivId} textarea`).val(''); // Clear content when hidden
                    }
                });
                // Initial state on page load
                // Check if the model value is true to show details initially (for Edit view)
                // For Create, it will be false by default, so it will hide.
                const initialValue = $(`input[name="${radioGroupName}"][value="true"]`).prop('checked');
                if (initialValue) {
                    $(`#${detailsDivId}`).show();
                } else {
                    $(`#${detailsDivId}`).hide();
                }
            }

            // Medical Assessment
            toggleDetails('HasHealthProblems', 'healthProblemsDetailsDiv');
            toggleDetails('HasRecentTests', 'recentTestsDetailsDiv');
            toggleDetails('IsTakingMedicationsSupplements', 'medsSuppsDetailsDiv');
            toggleDetails('HasMedicationAllergies', 'medAllergiesDetailsDiv');
            toggleDetails('HasChronicHereditaryDiseases', 'chronicDiseasesDetailsDiv');
            toggleDetails('HasPastSurgeries', 'surgeriesDetailsDiv');
            toggleDetails('HasInjuries', 'injuriesDetailsDiv');

            // Dietary Assessment
            toggleDetails('HasPreviousDietCommitment', 'prevDietExperienceDiv');
            toggleDetails('DrinksSpecificBeverages', 'beverageDetailsDiv');
            toggleDetails('HasFoodAllergies', 'foodAllergyDetailsDiv');
            toggleDetails('DislikesSpecificFood', 'dislikeFoodDetailsDiv');
            toggleDetails('WantsVitaminsMinerals', 'vitaminsMineralsDetailsDiv');

            // Workout Assessment
            toggleDetails('PracticesOtherSports', 'otherSportsDetailsDiv');
            toggleDetails('HasExerciseDiscomfort', 'discomfortDetailsDiv');

            // Handle conditional visibility for "Available Home Equipment" based on Workout Location
            function toggleHomeEquipment() {
                var workoutLocation = $('#workoutLocationSelect').val();
                if (workoutLocation === 'منزل' || workoutLocation === 'Home') {
                    $('#availableHomeEquipmentDiv').show();
                } else {
                    $('#availableHomeEquipmentDiv').hide();
                    $('#AvailableHomeEquipment').val(''); // Clear content when hidden
                }
            }
            $('#workoutLocationSelect').on('change', toggleHomeEquipment);
            toggleHomeEquipment(); // Initial call on page load

            // Function to set checkboxes based on a comma-separated string (for Edit view)
            function setCheckboxes(fieldName, valueString) {
                if (valueString) {
                    var values = valueString.split(',').map(item => item.trim());
                    values.forEach(function(val) {
                        $(`input[name="${fieldName}"][value="${val}"]`).prop('checked', true);
                    });
                }
            }

            // Pre-populate checkboxes on page load for Edit view
            // In Create view, Model will be empty, so these will do nothing.
            // In Edit view, Model will have data, so it will pre-select.
            setCheckboxes('PreferredProteinTypes', '@Model.PreferredProteinTypes');
            setCheckboxes('PreferredCarbohydrateTypes', '@Model.PreferredCarbohydrateTypes');
            setCheckboxes('PreferredHealthyFatTypes', '@Model.PreferredHealthyFatTypes');
            setCheckboxes('AvailableWorkoutDays', '@Model.AvailableWorkoutDays');

        });
    </script>
}